# Especifica la versión del formato de archivo Docker Compose a utilizar
# La versión 3.8 es compatible con Docker Engine 19.03.0+ y soporta todas las características modernas
version: '3.8'

# Define la sección donde se declaran todos los contenedores (servicios) de la aplicación
# Cada servicio representa un contenedor que formará parte de la aplicación multi-contenedor
services:

  # Define el primer servicio llamado "app"
  # Este nombre se usará como hostname interno entre contenedores
  app:
    # Indica que debe construir la imagen desde el Dockerfile en el directorio actual
    # El punto (.) se refiere al directorio donde está ubicado el docker-compose.yml
    build: .
    
    # Mapea puertos entre el host y el contenedor
    # Formato: "puerto_host:puerto_contenedor"
    # El puerto 8000 del host se conectará al puerto 8000 del contenedor
    ports:
      - "8000:8000"
    
    # Sobrescribe el comando CMD definido en el Dockerfile
    # Ejecuta la aplicación Streamlit con configuración específica para este servicio
    # streamlit run app.py: ejecuta el archivo app.py con Streamlit
    # --server.port=8000: configura el puerto interno del contenedor
    # --server.address=0.0.0.0: acepta conexiones desde cualquier IP
    # --server.headless=true: modo sin interfaz gráfica (apropiado para contenedores)
    command: ["streamlit", "run", "app/app.py", "--server.port=8000", "--server.address=0.0.0.0", "--server.headless=true"]